The packet does not loop forever because it is dropped when it reaches a TTL of 0. In the output included in the exercise above, the last time the packet passes by it has a TTL value of 3. The next time it would pass by, it gets dropped instead.